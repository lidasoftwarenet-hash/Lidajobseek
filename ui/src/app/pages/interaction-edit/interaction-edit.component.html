<div class="form-view" *ngIf="interaction">
    <header class="view-header">
        <h1>Edit Interaction</h1>
        <p class="subtitle">Update session details.</p>
    </header>

    <form #interactionForm="ngForm" (ngSubmit)="onSubmit()" class="data-form">
        <div class="form-section">
            <div class="form-row">
                <div class="form-group">
                    <label>Date & Time</label>
                    <input type="datetime-local" name="date" [(ngModel)]="interaction.date" required
                        class="input-field">
                </div>

                <div class="form-group">
                    <label>Interview Type</label>
                    <select name="interviewType" [(ngModel)]="interaction.interviewType" class="input-field" required>
                        <option value="phone call">Phone Call</option>
                        <option value="video call">Video Call</option>
                        <option value="home assignment">Home Assignment</option>
                        <option value="office interview">Office Interview</option>
                    </select>
                </div>
            </div>

            <div class="interviewers-block">
                <div class="section-label-row">
                    <label>Interviewers (Participants)</label>
                    <button type="button" class="btn-text" (click)="addParticipant()">+ Add Person</button>
                </div>

                <div class="participants-list">
                    <div *ngFor="let p of interaction.participants; let i = index" class="participant-row">
                        <select [name]="'role' + i" [(ngModel)]="p.role" class="input-field small-select">
                            <option *ngFor="let role of availableRoles" [value]="role">{{role}}</option>
                        </select>
                        <input type="text" [name]="'name' + i" [(ngModel)]="p.name" placeholder="Name"
                            class="input-field">
                        <button type="button" class="btn-remove" (click)="removeParticipant(i)">&times;</button>
                    </div>
                    <p class="muted-hint" *ngIf="interaction.participants?.length === 0">No interviewers added yet.</p>
                </div>
            </div>

            <div class="form-group">
                <label>Summary</label>
                <textarea name="summary" [(ngModel)]="interaction.summary" rows="3" required
                    placeholder="Main points..." class="input-field"></textarea>
            </div>

            <div class="form-group">
                <label>Notes (optional)</label>
                <textarea name="notes" [(ngModel)]="interaction.notes" rows="2" placeholder="Private thoughts..."
                    class="input-field"></textarea>
            </div>
        </div>



        <div class="form-actions">
            <button type="button" class="btn-secondary" [routerLink]="['/process', processId]">Cancel</button>
            <button type="submit" class="btn-primary" [disabled]="!interactionForm.form.valid">Save Changes</button>
        </div>
    </form>
</div>