<div class="form-view" *ngIf="review">
    <header class="view-header">
        <h1>Edit Self Review</h1>
        <p class="subtitle">Reflect on the session. Write short bullets, not essays.</p>
    </header>

    <form #reviewForm="ngForm" (ngSubmit)="onSubmit()" class="data-form">
        <div class="form-section">
            <div class="form-row">
                <div class="form-group">
                    <label>Interview Stage</label>
                    <input type="text" name="stage" [(ngModel)]="review.stage" required
                        placeholder="e.g. Technical Round 1" class="input-field">
                </div>

                <div class="form-group">
                    <label>Confidence (1â€“5)</label>
                    <select name="confidence" [(ngModel)]="review.confidence" class="input-field">
                        <option [ngValue]="1">1 - Poor</option>
                        <option [ngValue]="2">2 - Fair</option>
                        <option [ngValue]="3">3 - Good</option>
                        <option [ngValue]="4">4 - Very Good</option>
                        <option [ngValue]="5">5 - Excellent</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>What Went Well?</label>
                <textarea name="whatWentWell" [(ngModel)]="review.whatWentWell" rows="3" required
                    placeholder="Highlight wins..." class="input-field"></textarea>
            </div>

            <div class="form-group">
                <label>What Failed / Could Be Better?</label>
                <textarea name="whatFailed" [(ngModel)]="review.whatFailed" rows="3" required
                    placeholder="Identify struggles..." class="input-field"></textarea>
            </div>

            <div class="form-group">
                <label>Knowledge Gaps Identified</label>
                <textarea name="gaps" [(ngModel)]="review.gaps" rows="3" required placeholder="What to study next?"
                    class="input-field"></textarea>
            </div>
        </div>

        <div class="form-actions">
            <button type="button" class="btn-secondary" [routerLink]="['/process', processId]">Cancel</button>
            <button type="submit" class="btn-primary" [disabled]="!reviewForm.form.valid">Save Changes</button>
        </div>
    </form>
</div>

<style>
    .form-view {
        max-width: 500px;
        margin: 0 auto;
    }

    .view-header {
        margin-bottom: 32px;
    }

    .subtitle {
        color: var(--text-secondary);
        margin-top: 4px;
        font-size: 15px;
    }

    .data-form {
        display: flex;
        flex-direction: column;
        gap: 32px;
    }

    .form-section {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .form-row {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 20px;
    }

    .form-actions {
        display: flex;
        justify-content: flex-end;
        gap: 12px;
        padding-top: 24px;
        border-top: 1px solid var(--border-color);
    }
</style>